<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Adaptive Interview App</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header class="app-header">
      <h1>Adaptive Interview Facilitator</h1>
      <p class="tagline">Guide structured, fair interviews with adaptive questioning.</p>
    </header>

    <main id="app" class="app" aria-live="polite">
      <section class="panel active" id="intro-panel" aria-labelledby="setup-heading">
        <h2 id="setup-heading">Configure a new session</h2>
        <p class="instructions">
          Capture the basics and choose the starting difficulty. Once the interview begins, you can pivot topics
          on-demand while the app remembers where you left off.
        </p>
        <form id="setup-form" class="setup-form" novalidate>
          <div class="form-grid">
            <label for="candidate-name" class="form-field">
              Candidate name
              <input
                id="candidate-name"
                name="candidateName"
                type="text"
                autocomplete="name"
                placeholder="e.g., Avery Johnson"
              />
            </label>
            <label for="role-name" class="form-field">
              Role or requisition
              <input
                id="role-name"
                name="roleName"
                type="text"
                autocomplete="organization-title"
                placeholder="e.g., Senior Platform Engineer"
              />
            </label>
            <label for="topic-select" class="form-field">
              Topic focus
              <select
                id="topic-select"
                name="topics"
                multiple
                size="5"
                aria-describedby="topic-hint topic-error"
              >
                <option value="__all__" selected>All Topics</option>
              </select>
              <p id="topic-hint" class="field-hint">Hold Ctrl (or Cmd) to choose multiple topics.</p>
              <p id="topic-error" class="field-error" role="alert" hidden></p>
            </label>
            <label for="difficulty" class="form-field">
              Target difficulty
              <select id="difficulty" name="difficulty">
                <option value="balanced" selected>Balanced</option>
                <option value="foundational">Foundational</option>
                <option value="advanced">Advanced</option>
              </select>
            </label>
          </div>
          <fieldset class="session-options">
            <legend>Session options</legend>
            <label class="checkbox">
              <input type="checkbox" name="autoAdvance" id="auto-advance" />
              Auto-advance to the suggested follow-up after grading
            </label>
            <label class="checkbox">
              <input type="checkbox" name="keepTimers" id="keep-timers" />
              Show elapsed time per topic
            </label>
          </fieldset>
          <div class="actions">
            <button type="button" id="start-interview" class="primary">Start interview</button>
            <button type="button" id="resume-interview" class="secondary" hidden>Resume last session</button>
          </div>
        </form>
        <aside class="panel-note" aria-label="What you can do">
          <h3>What this workspace includes</h3>
          <ul>
            <li>Topic navigator to jump across competency areas.</li>
            <li>Guided prompts with level-specific rubrics.</li>
            <li>Keyboard-friendly grading shortcuts and structured notes.</li>
            <li>Automatic session summary with export-ready text.</li>
          </ul>
        </aside>
      </section>

      <section id="question-panel" class="panel" aria-labelledby="question-title" hidden>
        <div class="question-layout">
          <aside class="topic-selector" aria-label="Topic selector">
            <header>
              <h2>Topic tracks</h2>
              <p class="topic-subtitle">Pick the area that best fits the conversation. Active topic is highlighted.</p>
            </header>
            <p class="empty-state" id="topic-empty">Topics will appear here once questions load.</p>
            <ul id="topic-list" class="topic-list" hidden></ul>
            <footer class="topic-hints">
              <p>Use the topic navigator to revisit earlier threads without losing saved scores.</p>
            </footer>
          </aside>

          <article class="question-content" aria-live="polite">
            <header class="panel-header">
              <p id="question-category" class="question-category"></p>
              <h2 id="question-title"></h2>
            </header>
            <div class="question-body">
              <section class="expected-responses" aria-label="Expected responses by grade">
                <h3>Expected responses by grade (0–4)</h3>
                <ul id="expected-responses" class="expected-list"></ul>
              </section>
            </div>
          </article>

          <section class="grading-controls" aria-label="Grade and capture notes">
            <fieldset class="grade-fieldset">
              <legend>Choose a grade (use keys 0-4)</legend>
              <div class="grade-options" role="group" aria-label="Grade options">
                <button type="button" class="grade-option" data-grade="4" aria-label="Grade 4" data-active="false" aria-pressed="false">
                  <span class="grade-value">4</span>
                  <span class="grade-caption">Exceptional</span>
                </button>
                <button type="button" class="grade-option" data-grade="3" aria-label="Grade 3" data-active="false" aria-pressed="false">
                  <span class="grade-value">3</span>
                  <span class="grade-caption">Strong</span>
                </button>
                <button type="button" class="grade-option" data-grade="2" aria-label="Grade 2" data-active="false" aria-pressed="false">
                  <span class="grade-value">2</span>
                  <span class="grade-caption">Developing</span>
                </button>
                <button type="button" class="grade-option" data-grade="1" aria-label="Grade 1" data-active="false" aria-pressed="false">
                  <span class="grade-value">1</span>
                  <span class="grade-caption">Emerging</span>
                </button>
                <button type="button" class="grade-option" data-grade="0" aria-label="Grade 0" data-active="false" aria-pressed="false">
                  <span class="grade-value">0</span>
                  <span class="grade-caption">Not Demonstrated</span>
                </button>
              </div>
            </fieldset>
            <label class="notes-label" for="notes-input">Interview notes</label>
            <textarea
              id="notes-input"
              name="notes"
              rows="6"
              placeholder="Capture observations, quotes, red flags, or follow-up items"
            ></textarea>
            <div class="notes-hints">
              <p><strong>Tip:</strong> Press Enter to move to the next question. Use keys 0–4 to select a grade instantly.</p>
            </div>
            <div class="actions">
              <button type="button" id="next-question" class="primary">Next</button>
              <button type="button" id="back-track" class="secondary">Back</button>
            </div>
          </section>
        </div>
      </section>

      <section id="summary-panel" class="panel" aria-labelledby="summary-heading" hidden>
        <header class="summary-header">
          <h2 id="summary-heading">Interview summary</h2>
          <p class="summary-intro">
            Review outcomes by topic, sanity-check calibration, then export your notes to share with the committee.
          </p>
        </header>
        <section class="summary-overview" aria-label="Score snapshot">
          <h3>Score snapshot</h3>
          <dl class="summary-metrics">
            <div>
              <dt>Total questions rated</dt>
              <dd id="summary-count">0</dd>
            </div>
            <div>
              <dt>Topics covered</dt>
              <dd id="summary-topics">0</dd>
            </div>
            <div>
              <dt>Average rating</dt>
              <dd id="summary-average">—</dd>
            </div>
          </dl>
        </section>
        <ul id="summary-list" class="summary-list"></ul>
        <section class="summary-next-steps">
          <h3>Next steps</h3>
          <ol>
            <li>Confirm the recommendation aligns with role expectations.</li>
            <li>Share highlights with the hiring panel in your ATS note.</li>
            <li>Log calibration feedback while the conversation is fresh.</li>
          </ol>
        </section>
        <div class="actions">
          <button id="download-summary" class="secondary">Download summary</button>
          <button id="reset-session" class="danger">Reset interview</button>
        </div>
      </section>
    </main>

    <footer class="app-footer">
      <p>Works fully offline after the first load. Host on GitHub Pages, Netlify, or embed using an iframe.</p>
    </footer>

    <template id="summary-item-template">
      <li>
        <h3></h3>
        <p class="summary-rating"></p>
        <p class="summary-notes"></p>
      </li>
    </template>

    <script src="app.js" defer></script>
  </body>
</html>
